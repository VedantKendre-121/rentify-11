<!DOCTYPE html>
<html lang="en">
<head>
  <title>Rentify - Rent Items</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <!-- Existing CSS links would be here -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="static/css/open-iconic-bootstrap.min.css">
  <link rel="stylesheet" href="static/css/animate.css">
  
  <link rel="stylesheet" href="static/css/owl.carousel.min.css">
  <link rel="stylesheet" href="static/css/owl.theme.default.min.css">
  <link rel="stylesheet" href="static/css/magnific-popup.css">

  <link rel="stylesheet" href="static/css/aos.css">

  <link rel="stylesheet" href="static/css/ionicons.min.css">

  <link rel="stylesheet" href="static/css/bootstrap-datepicker.css">
  <link rel="stylesheet" href="static/css/jquery.timepicker.css">

  
  <link rel="stylesheet" href="static/css/flaticon.css">
  <link rel="stylesheet" href="static/css/icomoon.css">
  <link rel="stylesheet" href="static/css/style.css">

  <style>
    /* ==========================================
   GLOBAL VARIABLES
   ========================================== */
:root {
  --primary-color: #01d28e;
  --primary-dark: #00a067;
  --secondary-color: #333;
  --light-gray: #f8f9fa;
  --mid-gray: #e0e0e0;
  --text-color: #444;
  --text-light: #777;
  --white: #fff;
  --shadow-sm: 0 2px 5px rgba(0,0,0,0.08);
  --shadow-md: 0 4px 10px rgba(0,0,0,0.1);
  --shadow-lg: 0 8px 20px rgba(0,0,0,0.12);
  --border-radius: 8px;
  --transition-fast: all 0.2s ease;
  --transition-normal: all 0.3s ease;
}

/* ==========================================
   BASE STYLES
   ========================================== */
body {
  font-family: 'Poppins', sans-serif;
  color: var(--text-color);
  line-height: 1.6;
}

h1, h2, h3, h4, h5, h6 {
  color: var(--secondary-color);
}

a {
  color: var(--primary-color);
  transition: var(--transition-fast);
}

a:hover {
  color: var(--primary-dark);
  text-decoration: none;
}

/* ==========================================
   SECTION STYLES
   ========================================== */
.section-title {
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 20px;
  color: var(--secondary-color);
  text-align: center;
  position: relative;
}

.section-title:after {
  content: "";
  display: block;
  width: 50px;
  height: 3px;
  background: var(--primary-color);
  margin: 8px auto 0;
}

/* ==========================================
   FORM ELEMENTS
   ========================================== */
.input-group {
  margin-bottom: 20px;
}

.input-group label {
  display: block;
  font-weight: 500;
  margin-bottom: 8px;
  color: var(--text-color);
}

.form-control, .input-control {
  width: 100%;
  padding: 12px 15px;
  border: 1px solid var(--mid-gray);
  border-radius: 6px;
  font-size: 15px;
  transition: var(--transition-normal);
}

.form-control:focus, .input-control:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(1, 210, 142, 0.2);
  outline: none;
}

.file-upload {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  border: 2px dashed var(--mid-gray);
  border-radius: 6px;
  cursor: pointer;
  transition: var(--transition-normal);
}

.file-upload:hover {
  border-color: var(--primary-color);
  background-color: rgba(1, 210, 142, 0.05);
}

.file-upload-icon {
  font-size: 30px;
  color: var(--primary-color);
  margin-bottom: 10px;
}

.file-upload input {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  opacity: 0;
  cursor: pointer;
}

/* ==========================================
   BUTTONS
   ========================================== */
.btn-primary, .submit-btn, .list-item-btn, .rent-btn {
  background: var(--primary-color);
  color: var(--white);
  border: none;
  padding: 12px 20px;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-normal);
  text-align: center;
  display: inline-block;
}

.btn-primary:hover, .submit-btn:hover, .list-item-btn:hover, .rent-btn:hover {
  background: var(--primary-dark);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  color: var(--white);
}

.submit-btn {
  background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
  padding: 14px 24px;
  font-size: 16px;
  width: 100%;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.list-item-btn {
  padding: 8px 16px;
  font-size: 14px;
  margin-top: 10px;
}

.btn-sm {
  padding: 8px 16px;
  font-size: 14px;
}

/* ==========================================
   CARD STYLES
   ========================================== */
.item-card {
  transition: var(--transition-normal);
  border: 1px solid rgba(0,0,0,0.05);
  height: 100%;
  min-height: 350px;
  background-color: var(--white);
  border-radius: var(--border-radius);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.item-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.item-image {
  height: 200px; /* Adjust height as needed */
  object-fit: cover;
  width: 100%;
}

.item-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s;
}

.item-card:hover .item-image img {
  transform: scale(1.05);
}

.item-details {
  padding: 15px;
  flex-grow: 0;
  display: flex;
  flex-direction: column;
}

.item-name {
  font-size: 16px;
  line-height: 1.3;
  font-weight: 600;
  margin-bottom: 8px;
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.item-description {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.4;
  color: var(--text-light);
  font-size: 14px;
  margin-bottom: 12px;
}

.item-price {
  color: var(--primary-color);
  font-weight: bold;
  font-size: 16px;
  margin-top: auto;
  margin-bottom: 10px;
}

/* ==========================================
   LISTING FORM
   ========================================== */
.listing-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid var(--mid-gray);
}

.list-form-container {
  background-color: var(--white);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-md);
  padding: 30px;
  margin-top: 20px;
  display: none;
  transition: var(--transition-normal);
}

/* ==========================================
   FILTER BAR
   ========================================== */
.filter-bar {
  padding: 15px;
  background-color: var(--white);
  border-radius: var(--border-radius);
  margin-bottom: 20px;
  box-shadow: var(--shadow-sm);
  transition: var(--transition-normal);
}

.filter-bar:hover {
  box-shadow: var(--shadow-md);
}

.search-input {
  border-right: none;
}

.input-group-text {
  background-color: var(--white);
  border-left: none;
}

/* ==========================================
   NOTIFICATIONS
   ========================================== */
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 15px 25px;
  border-radius: 4px;
  color: var(--white);
  font-weight: 500;
  z-index: 1000;
  box-shadow: var(--shadow-md);
  animation: slideIn 0.3s forwards;
}

.notification.success {
  background-color: var(--primary-color);
}

.notification.error {
  background-color: #ff3860;
}

@keyframes slideIn {
  from { 
    transform: translateX(100%); 
    opacity: 0; 
  }
  to { 
    transform: translateX(0); 
    opacity: 1; 
  }
}

/* ==========================================
   EMPTY STATE
   ========================================== */
.empty-state {
  text-align: center;
  padding: 40px;
  color: var(--text-light);
  background-color: var(--white);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-sm);
  margin: 20px auto;
  max-width: 600px;
}

/* ==========================================
   UTILITY CLASSES
   ========================================== */
.object-fit-cover {
  object-fit: cover;
}

.text-success {
  color: var(--primary-color) !important;
}

/* ==========================================
   RESPONSIVE ADJUSTMENTS
   ========================================== */
@media (max-width: 991px) {
  .container {
    max-width: 100%;
    padding: 0 15px;
  }
  
  .item-image {
    height: 160px;
  }
}

@media (max-width: 767px) {
  .filter-bar {
    padding: 15px !important;
  }
  
  .section-title {
    font-size: 22px;
  }
  
  .listing-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .list-item-btn {
    align-self: flex-start;
  }
  
  .filter-bar .row {
    flex-direction: column;
  }
  
  .filter-bar .col-md-8,
  .filter-bar .col-md-4 {
    width: 100%;
    margin-bottom: 10px;
  }
  
  .list-form-container {
    padding: 20px;
  }
}

@media (max-width: 575px) {
  .item-card {
    margin-bottom: 15px;
  }
  
  .col-md-6, .col-lg-4 {
    padding-left: 10px;
    padding-right: 10px;
  }
  
  .row {
    margin-left: -10px;
    margin-right: -10px;
  }
  
  .item-image {
    height: 140px;
  }
  
  .notification {
    left: 20px;
    right: 20px;
    text-align: center;
  }
}
  </style>
  
  <!-- CSS for notifications -->
  <style>
    .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 25px;
        border-radius: 4px;
        color: white;
        font-weight: 500;
        z-index: 1000;
        animation: slideIn 0.3s forwards;
    }
    
    .notification.success {
        background-color: #01d28e;
    }
    
    .notification.error {
        background-color: #ff3860;
    }
    
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    
    .empty-state {
        text-align: center;
        padding: 40px;
        color: #777;
        grid-column: 1 / -1;
    }
  </style>
</head>
<body>
  <!-- Header, Navigation, and Hero sections would remain the same -->
  <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
    <div class="container">
      <a class="navbar-brand" href="/">Rent<span>ify</span></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="oi oi-menu"></span> Menu
      </button>

      <div class="collapse navbar-collapse" id="ftco-nav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item active"><a href="/" class="nav-link">Home</a></li>
            <li class="nav-item"><a href="/services" class="nav-link">Services</a></li> 
            <li class="nav-item"><a href="/rent" class="nav-link">Rent</a></li>
            <li class="nav-item"><a href="/blog" class="nav-link">Blog</a></li>
            <li class="nav-item"><a href="/contact" class="nav-link">Contact</a></li>
            
        </ul>
      </div>
    </div>
  </nav>
<!-- END nav -->

<section class="hero-wrap hero-wrap-2 js-fullheight" style="background-image: url('static/images/bg_3.jpg');" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
      <div class="row no-gutters slider-text js-fullheight align-items-end justify-content-start">
        <div class="col-md-9 ftco-animate pb-5">
            <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home <i class="ion-ios-arrow-forward"></i></a></span> <span>Items <i class="ion-ios-arrow-forward"></i></span></p>
          <h1 class="mb-3 bread">Select your Item</h1>
        </div>
      </div>
    </div>
  </section>

  <!-- Listing Section - UPDATED -->
  <section class="ftco-section">
    <div class="container">
      <div class="listing-header">
        <h2>List Your Item for Rent</h2>
        <button id="toggleFormBtn" class="list-item-btn">+ List Your Item</button>
      </div>
      <div id="listFormContainer" class="list-form-container">
        <form id="listItemForm" enctype="multipart/form-data">
          <div class="mb-3">
            <label for="itemName" class="form-label">Item Name</label>
            <input type="text" id="itemName" name="item_name" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="itemCategory" class="form-label">Category</label>
            <select id="itemCategory" name="category" class="form-control" required>
              <option value="">Select Category</option>
              <option value="electronics">Electronics</option>
              <option value="furniture">Furniture</option>
              <option value="appliances">Appliances</option>
              <option value="fitness">Fitness Equipment</option>
              <option value="others">Others</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="itemDescription" class="form-label">Description</label>
            <textarea id="itemDescription" name="description" rows="3" class="form-control" required></textarea>
          </div>
          <div class="mb-3">
            <label for="rentalPrice" class="form-label">Rental Price (₹ per day)</label>
            <input type="number" id="rentalPrice" name="price" class="form-control" min="1" required>
          </div>
          
          <div class="mb-3">
            <label for="itemImage" class="form-label">Upload Images</label>
            <input type="file" id="itemImage" name="image" class="form-control" accept="image/*" required>
          </div>
          <button type="submit" class="submit-btn">Submit Listing</button>
        </form>
      </div>
    </div>
  </section>

  <!-- Available Items Section - UPDATED -->
  <section class="ftco-section bg-light pt-4 pb-5">
    <div class="container">
      <h2 class="section-title mb-3">Available Items for Rent</h2>
      
      <div class="filter-bar p-3 bg-white rounded shadow-sm mb-4">
        <div class="row align-items-center">
          <div class="col-md-8 d-flex align-items-center">
            <select id="categoryFilter" class="form-control mr-2" style="max-width: 160px;">
              <option value="">All Categories</option>
              <option value="electronics">Electronics</option>
              <option value="furniture">Furniture</option>
              <option value="appliances">Appliances</option>
              <option value="fitness">Fitness Equipment</option>
              <option value="others">Others</option>
            </select>
          </div>
          <div class="col-md-4 mt-2 mt-md-0">
            <div class="input-group">
              <input type="search" id="searchInput" class="form-control search-input" placeholder="Search items...">
              <div class="input-group-append">
                <span class="input-group-text bg-white">
                  <i class="icon-search"></i>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row" id="itemsList">
        <!-- Items will be dynamically inserted here -->
      </div>
      
      <div id="emptyState" class="text-center py-5 d-none">
        <div class="empty-state bg-white p-4 rounded shadow-sm d-inline-block">
          <div class="mb-3">
            <i class="icon-shopping-bag" style="font-size: 48px; color: #ddd;"></i>
          </div>
          <h5>No items available for rent</h5>
          <p class="text-muted">Be the first to list one!</p>
        </div>
      </div>
    </div>
  </section>

  

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (!window.itemsLoaded) {
          window.itemsLoaded = true;
          loadItems();
      }
  
      document.getElementById("listItemForm")?.addEventListener("submit", async function(event) {
          event.preventDefault();
          let formData = new FormData(this);
          
          const submitBtn = this.querySelector('.submit-btn');
          const originalText = submitBtn.textContent;
          submitBtn.textContent = 'Uploading...';
          submitBtn.disabled = true;
          
          try {
              const response = await fetch("/items", { method: "POST", body: formData });
              const result = await response.json();
              
              if (result.success) {
                  showNotification('Success! Your item has been listed.', 'success');
                  loadItems();
                  this.reset();
              } else {
                  showNotification(result.error || 'Failed to list item. Please try again.', 'error');
              }
          } catch (error) {
              showNotification('An error occurred. Please try again.', 'error');
          } finally {
              submitBtn.textContent = originalText;
              submitBtn.disabled = false;
          }
      });
  
      document.getElementById("toggleFormBtn")?.addEventListener("click", function () {
          let formContainer = document.getElementById("listFormContainer");
          formContainer.style.display = formContainer.style.display === "none" ? "block" : "none";
      });
  
      document.querySelector(".search-input")?.addEventListener("input", function(e) {
          const searchTerm = e.target.value.toLowerCase();
          document.querySelectorAll(".item-card").forEach(item => {
              const name = item.querySelector(".item-name").textContent.toLowerCase();
              const description = item.querySelector(".item-description").textContent.toLowerCase();
              item.style.display = name.includes(searchTerm) || description.includes(searchTerm) ? "block" : "none";
          });
      });
  
      document.getElementById("categoryFilter")?.addEventListener("change", function () {
          loadItems(this.value);
      });
  });
  
  async function loadItems(category = "") {
      try {
          const response = await fetch("/items");
          const items = await response.json();
          let itemsList = document.getElementById("itemsList");
          let emptyState = document.getElementById("emptyState");
          itemsList.innerHTML = "";
          
          const filteredItems = category ? items.filter(item => item.category === category) : items;
          
          if (filteredItems.length === 0) {
              itemsList.classList.add("d-none");
              emptyState.classList.remove("d-none");
              return;
          }
          
          itemsList.classList.remove("d-none");
          emptyState.classList.add("d-none");
          
          filteredItems.forEach(item => {
              let itemCard = document.createElement("div");
              itemCard.className = "col-md-6 col-lg-4 mb-4";
              itemCard.innerHTML = `
                  <div class="item-card h-100 bg-white rounded overflow-hidden shadow-sm" data-category="${item.category}">
                      <div class="item-image" style="height: 180px; overflow: hidden;">
                          <img src="${item.image_url}" alt="${item.name}" class="img-fluid w-100 h-100 object-fit-cover">
                      </div>
                      <div class="item-details p-3">
                          <h5 class="item-name font-weight-bold">${item.name}</h5>
                          <p class="item-description text-muted small mb-2">${item.description}</p>
                          <div class="d-flex justify-content-between align-items-center mt-3">
                              <div class="item-price text-success font-weight-bold">₹${item.price}/day</div>
                              <button class="btn btn-sm btn-primary rent-btn px-3" onclick="redirectToPayment(${item.id}, '${item.name}', ${item.price})">Rent Now</button>
                          </div>
                      </div>
                  </div>`;
              itemsList.appendChild(itemCard);
          });
      } catch (error) {
          console.error("Failed to load items:", error);
      }
  }
  
  async function checkLogin() {
      const response = await fetch("/api/check-login");
      const data = await response.json();
      return data.logged_in;
  }
  
  async function redirectToPayment(itemId, itemName, itemPrice) {
      const isLoggedIn = await checkLogin();
      if (!isLoggedIn) {
          alert("You must be logged in to rent an item.");
          window.location.href = "/login-page";
          return;
      }
      window.location.href = `/payment?item_id=${itemId}&item_name=${encodeURIComponent(itemName)}&item_price=${itemPrice}`;
  }
  
  function showNotification(message, type) {
      const notification = document.createElement("div");
      notification.className = `notification ${type}`;
      notification.textContent = message;
      document.body.appendChild(notification);
      setTimeout(() => notification.remove(), 3000);
  }
  
  </script>














<!-- Footer would remain the same -->
<footer class="ftco-footer ftco-bg-dark ftco-section">
  <div class="container">
    <div class="row mb-5">
      <div class="col-md">
        <div class="ftco-footer-widget mb-4">
          <h2 class="ftco-heading-2"><a href="#" class="logo">Rent<span>ify</span></a></h2>
          <p>Why buy when you can rent? Save money, reduce waste, and enjoy flexibility without long-term commitments.</p>
          <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
            <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
            <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
            <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
          </ul>
        </div>
      </div>
      <div class="col-md">
        <div class="ftco-footer-widget mb-4 ml-md-5">
          <h2 class="ftco-heading-2">Information</h2>
          <ul class="list-unstyled">
            <li><a href="#" class="py-2 d-block">About</a></li>
            <li><a href="#" class="py-2 d-block">Services</a></li>
            <li><a href="#" class="py-2 d-block">Term and Conditions</a></li>
            <li><a href="#" class="py-2 d-block">Best Price Guarantee</a></li>
            <li><a href="#" class="py-2 d-block">Privacy &amp; Cookies Policy</a></li>
          </ul>
        </div>
      </div>
      <div class="col-md">
         <div class="ftco-footer-widget mb-4">
          <h2 class="ftco-heading-2">Customer Support</h2>
          <ul class="list-unstyled">
            <li><a href="#" class="py-2 d-block">FAQ</a></li>
            <li><a href="#" class="py-2 d-block">Payment Option</a></li>
            <li><a href="#" class="py-2 d-block">Booking Tips</a></li>
            <li><a href="#" class="py-2 d-block">How it works</a></li>
            <li><a href="#" class="py-2 d-block">Contact Us</a></li>
          </ul>
        </div>
      </div>
      <div class="col-md">
        <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2">Have a Questions?</h2>
            <div class="block-23 mb-3">
              <ul>
                <li><span class="icon icon-map-marker"></span><span class="text">Sector 5. Hinjewadi, Pune, Maharashtra, INDIA</span></li>
                <li><a href="#"><span class="icon icon-phone"></span><span class="text">+91 8129356874</span></a></li>
                <li><a href="#"><span class="icon icon-envelope"></span><span class="text">info@rentify.com</span></a></li>
              </ul>
            </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 text-center">

        <p>
Rentify &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved |  <i class="icon-heart color-danger" aria-hidden="true"></i> </a>
</p>
      </div>
    </div>
  </div>
</footer>


<!-- loader -->
<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>
<script src="static/js/jquery.min.js"></script>
<script src="static/js/jquery-migrate-3.0.1.min.js"></script>
<script src="static/js/popper.min.js"></script>
<script src="static/js/bootstrap.min.js"></script>
<script src="static/js/jquery.easing.1.3.js"></script>
<script src="static/js/jquery.waypoints.min.js"></script>
<script src="static/js/jquery.stellar.min.js"></script>
<script src="static/js/owl.carousel.min.js"></script>
<script src="static/js/jquery.magnific-popup.min.js"></script>
<script src="static/js/aos.js"></script>
<script src="static/js/jquery.animateNumber.min.js"></script>
<script src="static/js/bootstrap-datepicker.js"></script>
<script src="static/js/jquery.timepicker.min.js"></script>
<script src="static/js/scrollax.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
<script src="static/js/google-map.js"></script>
<script src="static/js/main.js"></script>
</body>
</html>